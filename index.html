<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src='//munqu.com/sdk.js' data-zone='10208212' data-sdk='show_10208212'></script>
    <title>Get Flix App</title>
    <style>
        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body{
            min-height: 100vh;
            min-width: 100vw;
            background-color: #363636;
            color: white;
            
        }
        main{
            height: 100%;
            width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: flex start;
            align-items center;
            padding: 10px;
        }
        main h2{
            text-align: center;
        }
        .search-container{
            height: 30px;
            width: 100%;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            background-size: cover;
        }
        .search-container input{
            color: white;
            padding: 0 5px;
            width: 150px;
            border: none;
            border-radius: 4px 0 0 4px;
            background-color: #434343;
        }
        .search-container input:focus{
            outline: none;
            color: white;
            caret-color: white;
            padding: 0 5px;
        }
        .search-container button{
            font-size: 20px;                            
            background-color: #434343;
            border: none;
            border-radius: 0 4px 4px 0;
            padding: 5px;
            align-items: center;
        }
        .movie-container{
            height: 200px;
            width: 100%;
            margin: 10px 0;
            background-color: red;
            border: 2px solid white;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }
        .movie-container h2{
            height: auto;
            width: 100%;
            padding: 10px;
            background-color: #0000006d;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        .movie-container p{
            position: absolute;
            top: 0;
            left: 0;
            padding: 10px 15px;
            border-right: 1px solid white;
            border-bottom: 1px solid white;
            background-color: #000000aa;
        }
       .nav{
            height: 50px;
            width: 100%;
            list-style: none;
            gap: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .nav li{
            color: black;
            font-weight: bold;
            background-color: white;
            padding: 10px 15px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <main>
        <h2>Copy The Download Link and Paste it in Your Browser</h2>
        <div class="search-container">
            <input id="search-input" type="text">
            <button id="search-button">&#128269;</button>
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="dLink" data-original="Getting Link...">Getting Link</p>
        </div>
        
        <ul class="nav">
            <li class="prev">Prev</li>
            <li class="pageText">1</li>
            <li class="next">Next</li>
        </ul>
    </main>
    
    <script>
        let originalImage = "https://image.tmdb.org/t/p/original";
        const popularAPI = "https://api.themoviedb.org/3/movie/popular";
        const myAPI = "fc6800402ffd747e928d3b0837704dc4";
        const saGitna = "?api_key=";
        let movieCon = document.querySelectorAll('.movie-container');
        let movieTitle = document.querySelectorAll('.title');
        let dLink = document.querySelectorAll('.dLink');
        let downloadLink = 'https://vdl.np-downloader.com/sdm_downloads/';

        firstFetch();
        
        function firstFetch(){
            fetch(`${popularAPI}${saGitna}${myAPI}`)
             .then(response => response.json())
             .then(data => {
                 movieCon.forEach((moviecon, index) => {
                  if(data.results && data.results[index] && data.results[index].backdrop_path){
                      moviecon.style.backgroundImage = `url(${originalImage}${data.results[index].backdrop_path})`;
                      //tapos na sa pag kuha ng photos
                      //para sa title naman
                      movieTitle.forEach((title, index) => {
                          title.textContent = `${data.results[index].title} (${data.results[index].release_date.substring(0, 4)})`;
                       kuhaLink(data, index)
                      });//sa movititle foreach
                     
                  }//unang if
                 })//movieConforEach
                 
                 //btns
                 
             })//sa then
             .catch(error => console.error(error));
        }//dulo ng firstFetch
                
        function kuhaLink(movie, index){
            const plusLink = `${movie.results[index].title.replace(/\s+/g, '-')}-${movie.results[index].release_date.substring(0, 4)}`;        
            
            dLink.forEach(kopyaUrl => {
                setTimeout(()=>{
                    kopyaUrl.textContent = 'Copy Link';
                    kopyaUrl.addEventListener('click', ()=>{
                        //alert('hellow sorld')
                        //monetag
                        show_10208212().then(() => {
  // You need to add your user reward function here, which will be executed after the user watches the ad.
  // For more details, please refer to the detailed instructions.
  navigator.clipboard.writeText(`${downloadLink}download-${plusLink}`);
  dlink.textContent = 'Link Copied';
  alert('Link Copied!! Paste The Link in your Browser to start Downloading the Movie.');
}).catch(error => console.error(error));
                        //monetag
                    });
                },5000)
            });
           
        }
        
        //navigation naman
        let prevBtn = document.querySelector('.prev');
        let pageText = document.querySelector('.pageText');
        let nextBtn = document.querySelector('.next');
        let currentCount = 1;
        
        prevBtn.addEventListener('click', ()=> {
        window.scrollTo({top: 0, behavior: 'smooth'});
            if(currentCount >= 1){
                currentCount--;
                pageText.textContent = currentCount;
                pagination();
            }
        });
        
        nextBtn.addEventListener('click', ()=> {
        window.scrollTo({top: 0, behavior: 'smooth'});
        //reset dLink
        dLink.forEach(dlink => {
            dlink.textContent = dlink.dataset.original;
        });       
            nextBtnHandler()
        });
        
        function nextBtnHandler(){
            currentCount++;
               pageText.textContent = currentCount;
               pagination(currentCount);
        }
        
        //pagination fetch
        function pagination(pahina){
            fetch(`${popularAPI}${saGitna}${myAPI}&page=${currentCount}`)
             .then(response => response.json())
             .then(data => {
                 movieCon.forEach((moviecon, index) => {
                     if(data.results && data.results[index] && data.results[index].backdrop_path){
                         moviecon.style.backgroundImage = `url(${originalImage}${data.results[index].backdrop_path})`;
                     }//sa if
                 });//movieCon foreach
                 
                 //title naman
                 movieTitle.forEach((title, index) => {
                          title.textContent = `${data.results[index].title} (${data.results[index].release_date.substring(0, 4)})`;
                          //link naman
                 
               kuhaLink(data, index);
                 });
                 
             })
             .catch(error => console.log(error));
        }
        
        //search naman
        let searchInput = document.getElementById('search-input');
        let searchBtn = document.getElementById('search-button');
        const searchApi = 'https://api.themoviedb.org/3/search/movie?api_key=';
        let resultPage = 1;
        
        searchBtn.addEventListener('click', () => {
        dLink.forEach(dlink => {
            dlink.textContent = dlink.dataset.original;
        });
        movieCon.forEach(movie => {
            movie.style.backgroundImage = '';
        });
        movieTitle.forEach(title => {
            title.textContent = '';
        });
        pageText.textContent = resultPage;
        let keyword = searchInput.value;
            fetch(`${searchApi}${myAPI}&query=${encodeURIComponent(keyword)}&page=${resultPage}`)
             .then(response => response.json())
             .then(search => {
                 movieCon.forEach((movie, index) => {
                 if(search.results && search.results[index] && search.results[index].backdrop_path){
                     movie.style.backgroundImage = `url(${originalImage}${search.results[index].backdrop_path})`;
                 }      
                 });
                 
                 //title naman
                 movieTitle.forEach((title, index) => {
                 title.textContent = `${search.results[index].title} (${search.results[index].release_date.substring(0, 4)})`;
                 //link naman
                 
            kuhaLink(search, index);
                 });
                 
                 //buttons naman
                 nextBtn.addEventListener('click', ()=> {
                     window.scrollTo({top: 0, behavior: 'smooth'});
                     resultPage++;
                     pageText.textContent = resultPage;
                     //resetdLink
                     dLink.forEach(dlink => {
                         dlink.textContent = dlink.dataset.original;
                         //pagination(resultPage);
                     });
                     
                 });
             })
             .catch(error => console.error(error));
        });
        
     
    </script>
</body>
</html>
