<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src='//munqu.com/sdk.js' data-zone='10208212' data-sdk='show_10208212'></script>
    <title>Get Flix App</title>
    <style>
        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body{
            min-height: 100vh;
            min-width: 100vw;
            background-color: #363636;
            color: white;
            
        }
        main{
            height: 100%;
            width: 100vw;
            display: flex;
            flex-direction: column;
            justify-content: flex start;
            align-items center;
            padding: 10px;
        }
        main h2{
            text-align: center;
        }
        .search-container{
            height: 30px;
            width: 100%;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            background-size: cover;
        }
        .search-container input{
            color: white;
            padding: 0 5px;
            width: 150px;
            border: none;
            border-radius: 4px 0 0 4px;
            background-color: #434343;
        }
        .search-container input:focus{
            outline: none;
            color: white;
            caret-color: white;
            padding: 0 5px;
        }
        .search-container button{
            font-size: 20px;                            
            background-color: #434343;
            border: none;
            border-radius: 0 4px 4px 0;
            padding: 5px;
            align-items: center;
        }
        .movie-container{
            height: 200px;
            width: 100%;
            margin: 10px 0;
            background-color: red;
            border: 2px solid white;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }
        .movie-container h2{
            height: auto;
            width: 100%;
            padding: 10px;
            background-color: #0000006d;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        .movie-container p {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            padding: 10px 15px;
            border-radius: 5px;
            background-color: #000000ae;
            text-align: center;
        }

       .nav{
            height: 50px;
            width: 100%;
            list-style: none;
            gap: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .nav li{
            color: black;
            font-weight: bold;
            background-color: white;
            padding: 10px 15px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <main>
        <h2>Copy The Download Link and Paste it in Your Browser</h2>
        <div class="search-container">
            <input id="search-input" type="text">
            <button id="search-button">&#128269;</button>
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        </div>
        <div class="movie-container">
            <h2 class="title" data-original=""></h2>
            <p class="playerBtn" data-original="Generating">Generating</p>
        </div>
        
        <ul class="nav" id="firstLipatan">
            <li class="prev">Prev</li>
            <li class="pageText">1</li>
            <li class="next">Next</li>
        </ul>
        <ul class="nav" id="searchLipatan" style="display: none;">
            <li class="searchPrev">Prev</li>
            <li class="searchPageText">1</li>
            <li class="searchNext">Next</li>
        </ul>
    
    <script>
        let originalImage = "https://image.tmdb.org/t/p/original";
        const popularAPI = "https://api.themoviedb.org/3/movie/popular";
        const myAPI = "fc6800402ffd747e928d3b0837704dc4";
        const saGitna = "?api_key=";
        let movieCon = document.querySelectorAll('.movie-container');
        let movieTitle = document.querySelectorAll('.title');
        let playBtn = document.querySelectorAll('.playerBtn');
        const dlUrl = 'https://vdl.np-downloader.com/sdm_downloads/';
        let searchInput = document.getElementById('search-input');
        let searchBtn = document.getElementById('search-button');
        const searchApi = 'https://api.themoviedb.org/3/search/movie?api_key=';
        const searchLipatan = document.getElementById('searchLipatan');
        const firstLipatan = document.getElementById('firstLipatan')
        const searchPrev = document.querySelector('.searchPrev');
        const searchPageText = document.querySelector('.searchPageText');
        const searchNext = document.querySelector('.searchNext');
        
        firstFetch()
        
        function firstFetch(){
            fetch(`${popularAPI}${saGitna}${myAPI}`)
             .then(response => response.json())
             .then(data => {
                 movieConFunc(data);
                 
                 movieTitleFunc(data);
                
                copyNow(data);
             })
             .catch(error => console.error(error));
        }
        
        
        let resultPage = 1;
        searchBtn.addEventListener('click', ()=> {
            searchLipatan.style.display = 'flex';
            firstLipatan.style.display = 'none'
            //console.log('hellow')
            resetOrig()
            searchFetch(resultPage);
            pageText.textContent = resultPage;
        })
        
        function searchFetch(resultPage){
        let keyword = searchInput.value;
            fetch(`${searchApi}${myAPI}&query=${encodeURIComponent(keyword)}&page=${resultPage}`)
             .then(response => response.json())
             .then(search => {
                 movieConFunc(search);
                 
                 movieTitleFunc(search);
                
                copyNow(search);
             })
             .catch(error => console.error(error));
        }
        //search nextprev
        searchPrev.addEventListener('click', ()=> {
            if(resultPage >= 1){
                scrollTo({top:0, behavior: 'smooth'});
                resetOrig();
                resultPage--;
                searchFetch(resultPage);
            }
        });
        //searchPageText
        
        searchNext.addEventListener('click', ()=>{
            scrollTo({top:0, behavior: 'smooth'});
            resetOrig();
            resultPage++
            searchFetch(resultPage);
        });
        
        
        //nextprev
        const prevBtn = document.querySelector('.prev');
        const pageText = document.querySelector('.pageText');
        const nextBtn = document.querySelector('.next');
        let currentCount = 1;
        
        prevBtn.addEventListener('click', ()=> {
        console.log('kamusta')
            if(currentCount >= 1){
                scrollTo({top:0, behavior: 'smooth'});
                resetOrig();
                currentCount--;
                naviGate(currentCount);
            }
        });
        
        nextBtn.addEventListener('click', ()=> {
            scrollTo({top:0, behavior: 'smooth'});
            resetOrig();
            currentCount++
            naviGate(currentCount);
        });
        
        /*
        function nextBtnHandler(){
            //para sa firstFetch
            scrollTo({top:0, behavior: 'smooth'});
            resetOrig()
            currentCount++
            naviGate(currentCount);
            //parasa firstfetch
        }
        */
        
        //kailangan na fetch para makapag navigate
        function naviGate(currentCount){
        pageText.textContent = currentCount;
            fetch(`${popularAPI}${saGitna}${myAPI}&page=${currentCount}`)
             .then(response => response.json())
             .then(navi => {
                 movieConFunc(navi);
                 
                 movieTitleFunc(navi);
                
                 copyNow(navi);
             })
             .catch(error => console.error(error))
        }
        
        function resetOrig(){
            movieCon.forEach(poster => {
                poster.style.backgroundColor = 'red';
            });
            movieTitle.forEach(title => {
                title.textContent = ''
            });
            playBtn.forEach(generate => {
                generate.textContent = generate.dataset.original;
            });
        }
        //para sa poster
        function movieConFunc(palitan){
            movieCon.forEach((mobi, index) => {
                 if(palitan.results && palitan.results[index] && palitan.results[index].backdrop_path){
                     mobi.style.backgroundImage = `url(${originalImage}${palitan.results[index].backdrop_path})`;
                  } 
             });
        }
        //para sa title
        function movieTitleFunc(palitan){
            movieTitle.forEach((title, index) => {
                     title.textContent = `${palitan.results[index].title} (${palitan.results[index].release_date.substring(0, 4)})`; 
                 });
        }
        
        //playerBtn
        function copyNow(movie, index){
            setTimeout(()=>{
                playBtn.forEach((pilay, index)=>{
                pilay.textContent = 'Copy Link'
                const plusLink = `${movie.results[index].title.replace(/\s+/g, '-')}-${movie.results[index].release_date.substring(0, 4)}`;
                pilay.addEventListener('click', ()=> {
                    //alert('hellow world');
                    // Rewarded interstitial
                    show_10208212()
                     .then(() => {
                     navigator.clipboard.writeText(`${dlUrl}download-${plusLink}`)
                     // For more details, please refer to the detailed instructions.
                     alert('Link Copied! Paste it in your browser to start downloading');
                     })
                                                            
                    //
                    navigator.clipboard.writeText(`${dlUrl}download-${plusLink}`)
                });
            });
            },5000)
        }
     
    </script>
</body>
</html>